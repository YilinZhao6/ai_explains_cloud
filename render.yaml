# render.yaml
services:
  - type: web
    name: backend
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python app.py  # or whatever your start command is
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
      - key: PORT
        value: 10000
    
  - type: static
    name: frontend
    buildCommand: cd frontend && npm install && npm run build  # adjust path as needed
    staticPublishPath: ./frontend/build  # adjust path as needed
    envVars:
      - key: NODE_VERSION
        value: 16.0.0

# requirements.txt (in backend directory)
anthropic==0.39.0
beautifulsoup4==4.12.3
Flask==3.1.0
Flask_Cors==5.0.0
numpy==2.1.3
openai==1.55.0
pydantic==1.10.15
Requests==2.32.3

# Add other dependencies your backend needs

# runtime.txt (in backend directory)
python-3.9.0

# In your backend/app.py
import os
from flask import Flask

app = Flask(__name__)

# Important: Configure CORS for your frontend domain
@app.after_request
def after_request(response):
    response.headers.add('Access-Control-Allow-Origin', 'https://your-frontend-url.render.com')
    response.headers.add('Access-Control-Allow-Headers', 'Content-Type,Authorization')
    response.headers.add('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS')
    return response

if __name__ == "__main__":
    port = int(os.environ.get("PORT", 10000))
    app.run(host="0.0.0.0", port=port)

# In your frontend/.env.production
REACT_APP_API_URL=https://your-backend-url.render.com